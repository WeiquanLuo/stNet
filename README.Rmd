---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# stNet

<!-- badges: start -->
<!-- badges: end -->

The goal of stNet is to remove the heterogeneity bewteen spatiotemporal data by fusing the spatial and temporal feature with mapping to the desired scale.

## Installation

You can install the released version of stNet from [CRAN](https://CRAN.R-project.org) with:

``` r
devtools::install_github("WeiquanLuo/stNet")
# install.packages("stNet") # not yet avaliable
```

## Workflow

<center>
![Workflow for rivertopo](inst/extdata/stNet.png){width=100%}
</center>

## Example

This is a basic example which shows you how to solve a common problem:

```{r example}
library(stNet)
data(weather_tmax_sf)
data(weather_tmin_sf)
data(corn_yield_sf)

corn_yield_st <- corn_yield_sf
weather_tmin_st <- weather_tmin_sf
tictoc::tic()
yield_tmin_t <- spatio_fuse(target_stN = corn_yield_st,
                               data_stN = weather_tmin_st,
                               parm_nm = "tmin",
                               crs = 2163); yield_tmin_t
tictoc::toc()
yield_tmin <- tempo_fuse(target_data = yield_tmin_t,
                          date_col = c("Year", "Date"),
                          scaling = c("Year","Month"),
                          aggMethod = c("mean","min")); yield_tmin

weather_tmax_st <- weather_tmax_sf
tictoc::tic()
yield_tmax_t <- spatio_fuse(target_stN = corn_yield_st,
                               data_stN = weather_tmax_st,
                               parm_nm = "tmax",
                               crs = 2163); yield_tmax_t
tictoc::toc()
yield_tmax <- tempo_fuse(target_data = yield_tmax_t,
                          date_col = c("Year", "Date"),
                          scaling = c("Year","Month"),
                          aggMethod = c("mean","min")); yield_tmax

bind_data <- cbind_TargetDatas(yield_tmin, yield_tmax, 
                               target = "yield", join_by = "Year")
```

